set(EXTRACTOR_SRCS
    bvh_extractor.cpp
    extract_bvh2.cpp)

if (EMBREE_FOUND)
    set(EXTRACTOR_SRCS ${EXTRACTOR_SRCS}
    extract_bvh4_8.cpp)
endif ()

add_executable(bvh_extractor ${EXTRACTOR_SRCS})
target_include_directories(bvh_extractor PUBLIC ../common)
target_link_libraries(bvh_extractor PUBLIC rodent_runtime)

if (EMBREE_FOUND)
    target_include_directories(bvh_extractor PUBLIC ${EMBREE_ROOT_DIR}/include ${EMBREE_ROOT_DIR} ${EMBREE_LIBRARY_DIR})
    target_compile_definitions(bvh_extractor PUBLIC ${EMBREE_DEFINITIONS})
    target_link_libraries(bvh_extractor PUBLIC ${EMBREE_DEPENDENCIES})
    target_compile_definitions(bvh_extractor PUBLIC -DENABLE_EMBREE_BVH)
endif ()

# Needs the interface file generated by bench_traversal
add_dependencies(bvh_extractor bench_traversal)
